{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\n// pages/api/readFile.js\nimport fs from 'fs';\nimport path from 'path';\nvar FILES_DIR = '../'; // ファイルが格納されているディレクトリへのパス\n\nexport default function handler(req, res) {\n  var filename, filePath, data;\n  return _regeneratorRuntime.async(function handler$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (req.method === 'GET') {\n            try {\n              filename = req.filename.filename;\n              filePath = path.join(FILES_DIR, filename);\n              data = fs.readFileSync(filePath, 'utf8');\n              res.status(200).json({\n                content: data\n              });\n            } catch (error) {\n              res.status(500).json({\n                error: 'Error reading file'\n              });\n            }\n          } else {\n            res.setHeader('Allow', ['GET']);\n            res.status(405).end(\"Method \".concat(req.method, \" Not Allowed\"));\n          }\n\n        case 1:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}","map":{"version":3,"sources":["/home/runner/next-agi/pages/readFile.js"],"names":["fs","path","FILES_DIR","handler","req","res","method","filename","filePath","join","data","readFileSync","status","json","content","error","setHeader","end"],"mappings":";AAAA;AACA,OAAOA,EAAP,MAAe,IAAf;AACA,OAAOC,IAAP,MAAiB,MAAjB;AAEA,IAAMC,SAAS,GAAG,KAAlB,C,CAAyB;;AAEzB,eAAe,SAAeC,OAAf,CAAuBC,GAAvB,EAA4BC,GAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AACb,cAAID,GAAG,CAACE,MAAJ,KAAe,KAAnB,EAA0B;AACxB,gBAAI;AACMC,cAAAA,QADN,GACmBH,GAAG,CAACG,QADvB,CACMA,QADN;AAEIC,cAAAA,QAFJ,GAEeP,IAAI,CAACQ,IAAL,CAAUP,SAAV,EAAqBK,QAArB,CAFf;AAGIG,cAAAA,IAHJ,GAGWV,EAAE,CAACW,YAAH,CAAgBH,QAAhB,EAA0B,MAA1B,CAHX;AAIFH,cAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,gBAAAA,OAAO,EAAEJ;AAAX,eAArB;AACD,aALD,CAKE,OAAOK,KAAP,EAAc;AACdV,cAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEE,gBAAAA,KAAK,EAAE;AAAT,eAArB;AACD;AACF,WATD,MASO;AACLV,YAAAA,GAAG,CAACW,SAAJ,CAAc,OAAd,EAAuB,CAAC,KAAD,CAAvB;AACAX,YAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBK,GAAhB,kBAA8Bb,GAAG,CAACE,MAAlC;AACD;;AAbY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["// pages/api/readFile.js\nimport fs from 'fs';\nimport path from 'path';\n\nconst FILES_DIR = '../'; // ファイルが格納されているディレクトリへのパス\n\nexport default async function handler(req, res) {\n  if (req.method === 'GET') {\n    try {\n      const { filename } = req.filename;\n      const filePath = path.join(FILES_DIR, filename);\n      const data = fs.readFileSync(filePath, 'utf8');\n      res.status(200).json({ content: data });\n    } catch (error) {\n      res.status(500).json({ error: 'Error reading file' });\n    }\n  } else {\n    res.setHeader('Allow', ['GET']);\n    res.status(405).end(`Method ${req.method} Not Allowed`);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}