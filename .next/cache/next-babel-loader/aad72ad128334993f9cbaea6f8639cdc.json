{"ast":null,"code":"// pages/api/listFiles.js\nimport fs from 'fs';\nimport path from 'path';\nconst FILES_DIR = './pages'; // ディレクトリのパスを設定\n\nexport default function handler(req, res) {\n  if (req.method === 'GET') {\n    fs.readdir(FILES_DIR, (err, files) => {\n      if (err) {\n        res.status(500).json({\n          error: 'Error listing files',\n          details: err.message\n        });\n      } else {\n        res.status(200).json({\n          files\n        });\n      }\n    });\n  } else {\n    res.setHeader('Allow', ['GET']);\n    res.status(405).end(`Method ${req.method} Not Allowed`);\n  }\n}","map":{"version":3,"sources":["/home/runner/next-agi/pages/api/listFiles.js"],"names":["fs","path","FILES_DIR","handler","req","res","method","readdir","err","files","status","json","error","details","message","setHeader","end"],"mappings":"AAAA;AACA,OAAOA,EAAP,MAAe,IAAf;AACA,OAAOC,IAAP,MAAiB,MAAjB;AAEA,MAAMC,SAAS,GAAG,SAAlB,C,CAA6B;;AAE7B,eAAe,SAASC,OAAT,CAAiBC,GAAjB,EAAsBC,GAAtB,EAA2B;AACxC,MAAID,GAAG,CAACE,MAAJ,KAAe,KAAnB,EAA0B;AACxBN,IAAAA,EAAE,CAACO,OAAH,CAAWL,SAAX,EAAsB,CAACM,GAAD,EAAMC,KAAN,KAAgB;AACpC,UAAID,GAAJ,EAAS;AACPH,QAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,UAAAA,KAAK,EAAE,qBAAT;AAAgCC,UAAAA,OAAO,EAAEL,GAAG,CAACM;AAA7C,SAArB;AACD,OAFD,MAEO;AACLT,QAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEF,UAAAA;AAAF,SAArB;AACD;AACF,KAND;AAOD,GARD,MAQO;AACLJ,IAAAA,GAAG,CAACU,SAAJ,CAAc,OAAd,EAAuB,CAAC,KAAD,CAAvB;AACAV,IAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBM,GAAhB,CAAqB,UAASZ,GAAG,CAACE,MAAO,cAAzC;AACD;AACF","sourcesContent":["// pages/api/listFiles.js\nimport fs from 'fs';\nimport path from 'path';\n\nconst FILES_DIR = './pages'; // ディレクトリのパスを設定\n\nexport default function handler(req, res) {\n  if (req.method === 'GET') {\n    fs.readdir(FILES_DIR, (err, files) => {\n      if (err) {\n        res.status(500).json({ error: 'Error listing files', details: err.message });\n      } else {\n        res.status(200).json({ files });\n      }\n    });\n  } else {\n    res.setHeader('Allow', ['GET']);\n    res.status(405).end(`Method ${req.method} Not Allowed`);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}